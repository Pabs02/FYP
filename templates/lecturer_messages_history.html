{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
	<h2>ğŸ“¨ Lecturer Messages</h2>
	<a href="/" class="btn btn-outline-secondary">â† Back to Dashboard</a>
</div>

{% if messages %}
	{% for item in messages %}
	<div class="border rounded p-3 mb-3">
		<div class="d-flex justify-content-between align-items-start mb-2">
			<div>
				<h6 class="mb-1">{{ item.subject }}</h6>
				<small class="text-muted">
					To {{ item.lecturer_name or 'Lecturer' }}{% if item.module_code %} ({{ item.module_code }}){% endif %}
					Â· {{ item.sent_at | irish_datetime }}
				</small>
			</div>
			<span class="badge {% if item.email_status == 'sent' %}text-bg-success{% else %}text-bg-secondary{% endif %}">
				{{ item.email_status or 'unknown' }}
			</span>
		</div>
		{% if item.message %}
			<div class="small text-muted" style="white-space: pre-wrap;">{{ item.message }}</div>
		{% endif %}
		{% if item.email_error %}
			<div class="small text-danger mt-2">{{ item.email_error }}</div>
		{% endif %}
	</div>
	{% endfor %}

	<nav class="mt-3">
		<ul class="pagination">
			<li class="page-item {% if page <= 1 %}disabled{% endif %}">
				<a class="page-link" href="?page={{ page - 1 }}">Previous</a>
			</li>
			<li class="page-item disabled">
				<span class="page-link">Page {{ page }} of {{ total_pages }}</span>
			</li>
			<li class="page-item {% if page >= total_pages %}disabled{% endif %}">
				<a class="page-link" href="?page={{ page + 1 }}">Next</a>
			</li>
		</ul>
	</nav>
{% else %}
	<p class="text-muted">No lecturer messages yet.</p>
{% endif %}
{% endblock %}
