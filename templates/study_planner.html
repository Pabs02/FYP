{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
	<h2>ğŸ“š AI Study Planner</h2>
	<a href="/" class="btn btn-outline-secondary">â† Back to Dashboard</a>
</div>

<!-- Reference: ChatGPT (OpenAI) - Study Planner UI Guidance Text
     Date: 2026-01-22
     Prompt: "I want concise helper text for the study planner page that explains
     what the AI does and how to use the button. Can you draft UI copy?"
     ChatGPT provided the guidance copy for this section. -->
<p class="text-muted mb-4">
	Get personalized AI-powered study recommendations based on your current tasks, progress, and workload.
	Click "Generate Recommendations" to get actionable advice on prioritization, time management, and study strategies.
</p>

{% with messages = get_flashed_messages(with_categories=true) %}
	{% if messages %}
		{% for category, message in messages %}
			<div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
				{{ message }}
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
		{% endfor %}
	{% endif %}
{% endwith %}

<div class="card shadow-sm mb-4">
	<div class="card-header bg-primary text-white">
		<h5 class="mb-0">âœ¨ Generate Study Recommendations</h5>
	</div>
	<div class="card-body">
		<p class="text-muted mb-3">
			AI will analyze your current tasks and progress to provide personalized study recommendations.
		</p>
		<form method="POST">
			<button type="submit" class="btn btn-primary btn-lg">
				ğŸ¤– Generate Recommendations
			</button>
		</form>
	</div>
</div>

{% if error %}
<div class="alert alert-danger">
	<strong>Error:</strong> {{ error }}
</div>
{% endif %}

{% if recommendations %}
<div class="card shadow-sm">
	<div class="card-header bg-success text-white">
		<h5 class="mb-0">ğŸ“‹ AI Study Recommendations</h5>
	</div>
	<div class="card-body">
		<div class="recommendations-content" style="white-space: pre-wrap; line-height: 2; font-size: 1.05rem; color: #333;">
{{ recommendations }}
		</div>
		<hr class="my-4">
		<form method="POST" class="mt-3">
			<button type="submit" class="btn btn-outline-primary">
				ğŸ”„ Generate New Recommendations
			</button>
		</form>
	</div>
</div>
{% endif %}

{% if not recommendations and not error %}
<div class="card shadow-sm border-primary">
	<div class="card-body text-center py-5">
		<p class="text-muted mb-0">
			Click "Generate Recommendations" above to get started with personalized study advice.
		</p>
	</div>
</div>
{% endif %}

{% endblock %}
