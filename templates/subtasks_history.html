{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
	<h2>ğŸ§© Microtasks</h2>
	<a href="/" class="btn btn-outline-secondary">â† Back to Dashboard</a>
</div>

{% if subtasks %}
	{% for item in subtasks %}
	<div class="border rounded p-3 mb-3">
		<div class="d-flex justify-content-between align-items-start mb-2">
			<div>
				<h6 class="mb-1">{{ item.title }}</h6>
				<small class="text-muted">
					Task: {{ item.task_title }}{% if item.module_code %} ({{ item.module_code }}){% endif %}
				</small>
			</div>
			<span class="badge {% if item.is_completed %}text-bg-success{% else %}text-bg-secondary{% endif %}">
				{{ "Completed" if item.is_completed else "Pending" }}
			</span>
		</div>
		{% if item.description %}
			<p class="mb-2">{{ item.description }}</p>
		{% endif %}
		<div class="small text-muted">
			{% if item.planned_start %}Start: {{ item.planned_start }}{% endif %}
			{% if item.planned_end %} Â· End: {{ item.planned_end }}{% endif %}
			{% if item.estimated_hours %} Â· Est: {{ item.estimated_hours }}h{% endif %}
		</div>
	</div>
	{% endfor %}

	<nav class="mt-3">
		<ul class="pagination">
			<li class="page-item {% if page <= 1 %}disabled{% endif %}">
				<a class="page-link" href="?page={{ page - 1 }}">Previous</a>
			</li>
			<li class="page-item disabled">
				<span class="page-link">Page {{ page }} of {{ total_pages }}</span>
			</li>
			<li class="page-item {% if page >= total_pages %}disabled{% endif %}">
				<a class="page-link" href="?page={{ page + 1 }}">Next</a>
			</li>
		</ul>
	</nav>
{% else %}
	<p class="text-muted">No microtasks found yet. Generate a breakdown to see items here.</p>
{% endif %}
{% endblock %}
